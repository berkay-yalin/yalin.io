---
import Head from '../../components/Head.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import { getCollection } from 'astro:content';

import Navigation from "../../components/Navigation.astro";
import FormattedDate from "../../components/Articles/FormattedDate.astro";

import "../../styles/global.css";

const posts = (await getCollection("articles")).sort(
	(a, b) => b.data.publicationDate.valueOf() - a.data.publicationDate.valueOf(),
);
---

<!doctype html>
<html lang="en">
	<head>
		<Head title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>

	<body>
        <Navigation/>

        <main>
            <h1>Articles</h1>

            <ul>
                {
                    posts.map((post) => (
                        <li class="wrapper-blog-hero">
                            <span class="wrapper-date">
                                <code>{post.data.publicationDate.getFullYear()}</code>
                                <code>â€¢</code>
                                <code>{("0" + (post.data.publicationDate.getMonth() + 1).toString()).slice(-2)}</code>
                            </span>

                            <a href={`/articles/${post.slug}/`}>
                                {/* <img src={post.data.heroImage} alt="" /> */}
                                {/* <span class="date">{post.data.publicationDate}</span> */}
                                <span class="title">{post.data.title}</span>
                                {/* <span><FormattedDate client:load date={post.data.publicationDate}/></span>
                                <p class="description">{post.data.description}</p>
                                <p class="description">{post.data.publicationDate.getMonth()}</p> */}
                            </a>
                        </li>
                    ))
                }
            </ul>
        </main>
	</body>
</html>

<style lang="scss">
	$text-color: rgb(139, 148, 158);
    $link-color: rgb(88, 166, 255);
    $white-smoke: #f5f5f5;

    html, body {
        background-color: #111111;
    }

    h1 {
        text-align: center;
        font-size: 1rem;
        color: $text-color;
        margin: 0;
    }

    main {
        max-width: 720px;
        margin: auto;

        padding: 2rem 1rem;
        box-sizing: border-box;

        display: flex;
        flex-direction: column;
        gap: 1rem;
    }

    .wrapper-blog-hero::marker {
        color: white;
    }

    ul {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .wrapper-blog-hero {
        list-style-type: none;

        a, a:hover, a:visited, a:active {
            color: inherit;
        }

        img {
            width: 100%;
        }

        .title {
            color: $link-color;
            text-decoration: underline;
        }

        .description {
            color: $white-smoke;
        }
    }

    .wrapper-date {
        color: lightgrey;
        font-size: small;
        padding-right: 0.5rem;
        box-sizing: border-box;
    }
</style>
